#### 1 锁
* 从性能上分：乐观锁（用版本比较来实现）和悲观锁
* 从对数据库操作的类型来分，分为读锁和写锁（都属于悲观锁）
读锁（共享锁）：针对同一份数据，多个读操作可以同时进行而不会相互影响。当前session和其它session都可以读，当前session插入或者更新会报错，其它session插入更新会等待
写锁（排它锁）：当前写操作没有完成钱，它会阻断其它**写锁和读锁**。当前session对数据增删改查都没问题，其它session对数据的操作会被阻止。
#### 2 MVCC
MVCC 使用了一种不同的手段，每个连接到数据库的读者，在某个瞬间看到的是数据库的一个快照，写者写操作造成的变化在写操作完成之前（或者数据库事务提交之前）对于其他的读者来说是不可见的。
    
##### 原理
Read View的可见性规则如下所示：
​ 首先要知道Read View中的三个全局属性：
​ trx_list:一个数值列表，用来维护Read View生成时刻系统正活跃的事务ID（1,2,3）
​ uplimitid:记录trx_list列表中事务ID最小的ID（1）
​ lowlimitid:Read View生成时刻系统尚未分配的下一个事务ID，（4）

具体的比较规则如下：
​ 1、首先比较DBTRXID < uplimitid,如果小于，则当前事务能看到DBTRXID所在的记录，如果大于等于进入下一个判断
​ 2、接下来判断DBTRXID >= lowlimitid,如果大于等于则代表DBTRXID所在的记录在Read View生成后才出现的，那么对于当前事务肯定不可见，如果小于，则进入下一步判断
​ 3、判断DBTRXID是否在活跃事务中，如果在，则代表在Read View生成时刻，这个事务还是活跃状态，还没有commit，修改的数据，当前事务也是看不到，如果不在，则说明这个事务在Read View生成之前就已经开始commit，那么修改的结果是能够看见的。

参考：
https://blog.csdn.net/USTC_Zn/article/details/123622672        